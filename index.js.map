{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export const fetchPhotosByQuery = query => {\n\n  const searchParams = new URLSearchParams({\n    key: '53124504-9ef9dc7d083288085c55b9d9d',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  return fetch(`https://pixabay.com/api/?${searchParams}`).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n};\n","export const createGalleryCardTemplate = imgInfo => {\n  return `\n    <li class=\"gallery-card\">\n      <a href=\"${imgInfo.largeImageURL}\">\n        <img\n          class=\"gallery-img\"\n          src=\"${imgInfo.webformatURL}\"\n          alt=\"${imgInfo.tags}\"\n        />\n      </a>\n      <ul class=\"info\">\n        <li><b>Likes</b> ${imgInfo.likes}</li>\n        <li><b>Views</b> ${imgInfo.views}</li>\n        <li><b>Comments</b> ${imgInfo.comments}</li>\n        <li><b>Downloads</b> ${imgInfo.downloads}</li>\n      </ul>\n    </li>\n  `;\n};","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nimport { fetchPhotosByQuery } from './js/pixabay-api';\nimport { createGalleryCardTemplate } from './js/render-functions';\n\nconst refs = {\n  form: document.querySelector('.js-search-form'),\n  gallery: document.querySelector('.js-gallery'),\n  loader: document.querySelector('.js-loader'),\n};\n\nconst lightbox = new SimpleLightbox('.js-gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nrefs.form.addEventListener('submit', onSearchFormSubmit);\n\nfunction onSearchFormSubmit(event) {\n  event.preventDefault();\n\n  const { target: searchForm } = event;\n  const query = searchForm.elements.user_query.value.trim();\n  refs.gallery.innerHTML = '';\n\n  if (!query) {\n    iziToast.warning({\n      message: 'Please enter a search query before submitting!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  refs.loader.classList.add('is-active');\n\n  fetchPhotosByQuery(query)\n    .then(data => {\n      if (!data.hits.length) {\n        iziToast.info({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n        });\n        return;\n      }\n\n      const markup = data.hits\n        .map(image => createGalleryCardTemplate(image))\n        .join('');\n\n      refs.gallery.innerHTML = markup;\n      refs.gallery\n        .querySelectorAll('.gallery-card')\n        .forEach(card => setTimeout(() => card.classList.add('show'), 50));\n      lightbox.refresh();\n    })\n    .catch(() => {\n      iziToast.error({\n        message: 'Something went wrong. Please try again later.',\n        position: 'topRight',\n      });\n    })\n    .finally(() => {\n      refs.loader.classList.remove('is-active');\n      searchForm.reset();\n    });\n}\n"],"names":["fetchPhotosByQuery","query","searchParams","response","createGalleryCardTemplate","imgInfo","refs","lightbox","SimpleLightbox","onSearchFormSubmit","event","searchForm","iziToast","data","markup","image","card"],"mappings":"6vBAAO,MAAMA,EAAqBC,GAAS,CAEzC,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAK,qCACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EAED,OAAO,MAAM,4BAA4BC,CAAY,EAAE,EAAE,KAAKC,GAAY,CACxE,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACpB,CAAG,CACH,EChBaC,EAA4BC,GAChC;AAAA;AAAA,iBAEQA,EAAQ,aAAa;AAAA;AAAA;AAAA,iBAGrBA,EAAQ,YAAY;AAAA,iBACpBA,EAAQ,IAAI;AAAA;AAAA;AAAA;AAAA,2BAIFA,EAAQ,KAAK;AAAA,2BACbA,EAAQ,KAAK;AAAA,8BACVA,EAAQ,QAAQ;AAAA,+BACfA,EAAQ,SAAS;AAAA;AAAA;AAAA,ICR1CC,EAAO,CACX,KAAM,SAAS,cAAc,iBAAiB,EAC9C,QAAS,SAAS,cAAc,aAAa,EAC7C,OAAQ,SAAS,cAAc,YAAY,CAC7C,EAEMC,EAAW,IAAIC,EAAe,gBAAiB,CACnD,aAAc,MACd,aAAc,GAChB,CAAC,EAEDF,EAAK,KAAK,iBAAiB,SAAUG,CAAkB,EAEvD,SAASA,EAAmBC,EAAO,CACjCA,EAAM,eAAc,EAEpB,KAAM,CAAE,OAAQC,CAAY,EAAGD,EACzBT,EAAQU,EAAW,SAAS,WAAW,MAAM,OAGnD,GAFAL,EAAK,QAAQ,UAAY,GAErB,CAACL,EAAO,CACVW,EAAS,QAAQ,CACf,QAAS,iDACT,SAAU,UAChB,CAAK,EACD,MACD,CAEDN,EAAK,OAAO,UAAU,IAAI,WAAW,EAErCN,EAAmBC,CAAK,EACrB,KAAKY,GAAQ,CACZ,GAAI,CAACA,EAAK,KAAK,OAAQ,CACrBD,EAAS,KAAK,CACZ,QACE,2EACF,SAAU,UACpB,CAAS,EACD,MACD,CAED,MAAME,EAASD,EAAK,KACjB,IAAIE,GAASX,EAA0BW,CAAK,CAAC,EAC7C,KAAK,EAAE,EAEVT,EAAK,QAAQ,UAAYQ,EACzBR,EAAK,QACF,iBAAiB,eAAe,EAChC,QAAQU,GAAQ,WAAW,IAAMA,EAAK,UAAU,IAAI,MAAM,EAAG,EAAE,CAAC,EACnET,EAAS,QAAO,CACtB,CAAK,EACA,MAAM,IAAM,CACXK,EAAS,MAAM,CACb,QAAS,gDACT,SAAU,UAClB,CAAO,CACP,CAAK,EACA,QAAQ,IAAM,CACbN,EAAK,OAAO,UAAU,OAAO,WAAW,EACxCK,EAAW,MAAK,CACtB,CAAK,CACL"}